(function(d,e,f){var b=e.event,c;b.special.smartresize={setup:function(){e(this).bind("resize",b.special.smartresize.handler)},teardown:function(){e(this).unbind("resize",b.special.smartresize.handler)},handler:function(j,g){var i=this,h=arguments;j.type="smartresize";if(c){clearTimeout(c)}c=setTimeout(function(){e.event.handle.apply(i,h)},g==="execAsap"?0:100)}};e.fn.smartresize=function(g){return g?this.bind("smartresize",g):this.trigger("smartresize",["execAsap"])};e.Slideshow=function(g,h){this.jQueryel=e(h);if(this.jQueryel.width()>1351){this.jQueryel.width(1351)}this.jQuerylist=this.jQueryel.find("ul.ei-slider-large");this.jQueryimgItems=this.jQuerylist.children("li");this.itemsCount=this.jQueryimgItems.length;this.jQueryimages=this.jQueryimgItems.find("img:first");this.jQuerysliderthumbs=this.jQueryel.find("ul.ei-slider-thumbs").hide();this.jQuerysliderElems=this.jQuerysliderthumbs.children("li");this.jQuerysliderElem=this.jQuerysliderthumbs.children("li.ei-slider-element");this.jQuerythumbs=this.jQuerysliderElems.not(".ei-slider-element");this._init(g)};e.Slideshow.defaults={animation:"sides",autoplay:false,slideshow_interval:3000,speed:2000,easing:"",titlesFactor:0.6,titlespeed:800,titleeasing:"",thumbMaxWidth:150};e.Slideshow.prototype={_init:function(h){this.options=e.extend(true,{},e.Slideshow.defaults,h);this.jQueryimgItems.css("opacity",0);this.jQueryimgItems.find("div.ei-title > *").css("opacity",0);this.current=0;var g=this;this.jQueryloading=e('<div class="ei-slider-loading">Loading</div>').prependTo(g.jQueryel);e.when(this._preloadImages()).done(function(){g.jQueryloading.hide();g._setImagesSize();g._initThumbs();g.jQueryimgItems.eq(g.current).css({opacity:1,"z-index":10}).show().find("div.ei-title > *").css("opacity",1);if(g.options.autoplay){g._startSlideshow()}g._initEvents()})},_preloadImages:function(){var g=this,h=0;return e.Deferred(function(i){g.jQueryimages.each(function(j){e("<img/>").load(function(){if(++h===g.itemsCount){i.resolve()}}).attr("src",e(this).attr("src"))})}).promise()},_setImagesSize:function(){this.elWidth=this.jQueryel.width();var g=this;this.jQueryimages.each(function(j){var h=e(this);imgDim=g._getImageDim(h.attr("src"));h.css({width:imgDim.width,height:imgDim.height,marginLeft:imgDim.left,marginTop:imgDim.top})})},_getImageDim:function(g){var q=new Image();q.src=g;var k=this.elWidth,r=this.jQueryel.height()-5,n=r/k,o=q.width,j=q.height,i=j/o,p,l,m,h;if(n>i){l=r;p=r/i}else{l=k*i;p=k}return{width:p,height:l,left:(k-p)/2,top:(r-l)/2}},_initThumbs:function(){this.jQuerysliderElems.css({"max-width":this.options.thumbMaxWidth+"px",width:100/this.itemsCount+"%"});this.jQuerysliderthumbs.css("max-width",this.options.thumbMaxWidth*this.itemsCount+"px").show()},_startSlideshow:function(){var g=this;this.slideshow=setTimeout(function(){var h;(g.current===g.itemsCount-1)?h=0:h=g.current+1;g._slideTo(h);if(g.options.autoplay){g._startSlideshow()}},this.options.slideshow_interval)},_slideTo:function(l){if(l===this.current||this.isAnimating){return false}this.isAnimating=true;var k=this.jQueryimgItems.eq(this.current),h=this.jQueryimgItems.eq(l),g=this,j={zIndex:10},i={opacity:1};if(this.options.animation==="sides"){j.left=(l>this.current)?-1*this.elWidth:this.elWidth;i.left=0}h.find("div.ei-title > h2").css("margin-right",50+"px").stop().delay(this.options.speed*this.options.titlesFactor).animate({marginRight:0+"px",opacity:1},this.options.titlespeed,this.options.titleeasing).end().find("div.ei-title > h3").css("margin-right",-50+"px").stop().delay(this.options.speed*this.options.titlesFactor).animate({marginRight:0+"px",opacity:1},this.options.titlespeed,this.options.titleeasing);e.when(k.css({"z-index":1,opacity:0}).find("div.ei-title > *").stop().fadeOut(this.options.speed/2,function(){e(this).show().css("opacity",0)}),h.css(j).stop().animate(i,this.options.speed,this.options.easing),this.jQuerysliderElem.stop().animate({left:this.jQuerythumbs.eq(l).position().left},this.options.speed)).done(function(){k.css("opacity",0).find("div.ei-title > *").css("opacity",0);g.current=l;g.isAnimating=false})},_initEvents:function(){var g=this;e(d).on("smartresize.eislideshow",function(h){g._setImagesSize();g.jQuerysliderElem.css("left",g.jQuerythumbs.eq(g.current).position().left)});this.jQuerythumbs.on("click.eislideshow",function(j){if(g.options.autoplay){clearTimeout(g.slideshow);g.options.autoplay=false}var i=e(this),h=i.index()-1;g._slideTo(h);return false})}};var a=function(g){if(this.console){console.error(g)}};e.fn.eislideshow=function(h){if(typeof h==="string"){var g=Array.prototype.slice.call(arguments,1);this.each(function(){var i=e.data(this,"eislideshow");if(!i){a("cannot call methods on eislideshow prior to initialization; attempted to call method '"+h+"'");return}if(!e.isFunction(i[h])||h.charAt(0)==="_"){a("no such method '"+h+"' for eislideshow instance");return}i[h].apply(i,g)})}else{this.each(function(){var i=e.data(this,"eislideshow");if(!i){e.data(this,"eislideshow",new e.Slideshow(h,this))}})}return this}})(window,jQuery);